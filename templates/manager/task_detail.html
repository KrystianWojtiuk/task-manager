{% extends "base.html" %}

{% block title %}
  Task - {{ task.name }}
{% endblock %}

{% block content %}
  <div class="container mt-4">
    <div class="card mb-4">
      <div class="card-body">
        <h2 class="card-title">{{ task.name }}</h2>
        {% if object.description %}
          <p class="card-text">{{ task.description }}</p>
        {% endif %}
      </div>
    </div>

    <ul class="list-group mb-4">
      <li class="list-group-item"><strong>Type:</strong> {{ object.task_type }}</li>
      <li class="list-group-item"><strong>Priority:</strong> {{ object.priority }}</li>
      <li class="list-group-item"><strong>Deadline:</strong> {{ object.deadline }}</li>
      <li class="list-group-item"><strong>Completed:</strong> {{ object.is_complete|yesno:"✅,❌" }}</li>
      <li class="list-group-item">
        <strong>Project:</strong>
        {% if object.project %}
          <a href="{% url 'manager:project-detail' object.project.id %}">{{ object.project.name }}</a>
        {% else %}
          No project assigned
        {% endif %}
      </li>
    </ul>

    <h4>Assignees:</h4>
    <ul class="list-group">
      {% for worker in object.assignees.all %}
        <li class="list-group-item">
          <a href="{% url 'manager:worker-detail' worker.id %}">
            {{ worker.first_name }} {{ worker.last_name }}
          </a>
        </li>
      {% empty %}
        <li class="list-group-item">No workers assigned</li>
      {% endfor %}
    </ul>

    <a href="{% url 'manager:tasks' %}" class="btn btn-secondary mt-3">Back to tasks</a>
  </div>
{% endblock %}